var uid; $(document).ready(function(){if(void 0!=window.localStorage.username&&void 0!=window.localStorage.userid){var c=new Date;uid=""+window.localStorage.userid+c.getFullYear()+c.getMonth()+c.getDate();$.mobile.changePage("#home",{transition:"slide",changeHash:!0})}$("#btnLogin").click(function(){var b=$("#txtUserName").val().trim(),c=$("#txtPassword").val().trim();if(""==b||""==c)return alert("Please Fill The Details Completely"),!1;$.mobile.showPageLoadingMsg();$.ajax({type:"POST",url:url+"?op=do_login",data:{username:b, password:c},cache:!0,dataType:"json",success:onSuccess,error:onerror});return!1});$("#btnAttendance").click(function(){$.mobile.showPageLoadingMsg();if(void 0!=window.localStorage["attendance-"+uid])return data=JSON.parse(window.localStorage["attendance-"+uid]),showAttendance(data),!1;$.ajax({type:"POST",url:url+"?op=show_attendance",data:{studentid:window.localStorage.studentid},cache:!0,dataType:"json",success:showAttendance,error:onerror})});$("#btnResults").click(function(){$.mobile.showPageLoadingMsg(); if(void 0!=window.localStorage["results-"+uid])return data=JSON.parse(window.localStorage["results-"+uid]),showResults(data),!1;$.ajax({type:"POST",url:url+"?op=show_results",data:{studentid:window.localStorage.studentid},cache:!0,dataType:"json",success:showResults,error:onerror})});$("#btnAnnouncements").click(function(){$.mobile.showPageLoadingMsg();if(void 0!=window.localStorage["announcements-"+uid])return data=JSON.parse(window.localStorage["announcements-"+uid]),showAnnouncements(data),!1; $.ajax({type:"POST",url:url+"?op=show_announcements",data:{},cache:!0,dataType:"json",success:showAnnouncements,error:onerror})});$("#btnProfile").click(function(){$.mobile.showPageLoadingMsg();if(void 0!=window.localStorage.profile)return data=JSON.parse(window.localStorage.profile),showProfile(data),!1;$.ajax({type:"POST",url:url+"?op=show_profile",data:{userid:window.localStorage.userid},cache:!0,dataType:"json",success:showProfile,error:onerror})});$("#btnExit").click(function(){localStorage.removeItem("username"); localStorage.removeItem("userid");localStorage.removeItem("profile");$.mobile.changePage("#login",{transition:"slide",changeHash:!0})});$("#btnReset").click(function(){$("#txtUserName").val("");$("#txtPassword").val("")})});var url="http://www.topperseducation.com/webservices/ajax.php",heading='<div style="width:100%; height:54px; background:url(images/icon.png) no-repeat; padding-left:60px;">',heading=heading+'<h1 style="color:#000000;padding-top:10px;">TOPPERS</h1>',heading=heading+"</div>"; function showProfile(c){void 0==window.localStorage.profile&&(window.localStorage.profile=JSON.stringify(c));var b;b='<a class="ui-btn-left ui-btn ui-btn-icon-notext" >\t<span class="ui-btn">\t\t<span class="ui-icon ui-icon-checkbox-off ">&nbsp;</span>';b+="\t</span>";b+="</a> ";var d;d='<a class="ui-btn-left ui-btn ui-btn-icon-notext" >\t<span class="ui-btn">\t\t<span class="ui-icon ui-icon-checkbox-on ">&nbsp;</span>';d+="\t</span>";d+="</a> ";var a;a='<ul class="ui-listview ui-listview-inset ui-corner-all ">'+ ('<li class="ui-li ui-li-divider ui-btn ui-bar-a ui-corner-top">'+c.Name+"</li>");a+='<li class="ui-btn ui-btn-icon-right ui-li-has-arrow ui-li ui-btn-up-c" >';a+=' \t<div class="ui-btn-inner ui-li ">';a+='\t\t<div class="ui-btn-text">';a+='\t\t\t<a class="ui-link-inherit">';a+='\t\t\t\t<span style = "font-size:12px;" >Admission No : </span>';a+="\t\t\t</a>";a+="\t\t</div>";a+='\t\t<span style = "font-size:13px; margin-left: 40%; position: absolute; top: 50%; margin-top: -7px;" >';a+=c.Userid;a+= "</span>";a+="\t</div>";a+=' \t<div class="ui-btn-inner ui-li ">';a+='\t\t<div class="ui-btn-text">';a+='\t\t\t<a class="ui-link-inherit">';a+='\t\t\t\t<span style = "font-size:12px;" >Curriculam : </span>';a+="\t\t\t</a>";a+="\t\t</div>";a+='\t\t<span style = "font-size:13px; margin-left: 40%; position: absolute; top: 50%; margin-top: -7px;" >';a+=c.curriculam;a+="\t\t</span>";a+="\t</div>";a+=' \t<div class="ui-btn-inner ui-li ">';a+='\t\t<div class="ui-btn-text">';a+='\t\t\t<a class="ui-link-inherit">'; a+='\t\t\t\t<span style = "font-size:12px;" >Class : </span>';a+="\t\t\t</a>";a+="\t\t</div>";a+='\t\t<span style = "font-size:13px; margin-left: 40%; position: absolute; top: 50%; margin-top: -7px;" >';a+=c.class_name;a+="\t\t</span>";a+="\t</div>";a+=' \t<div class="ui-btn-inner ui-li ">';a+='\t\t<div class="ui-btn-text">';a+='\t\t\t<a class="ui-link-inherit">';a+='\t\t\t\t<span style = "font-size:12px;" >Batch : </span>';a+="\t\t\t</a>";a+="\t\t</div>";a+='\t\t<span style = "font-size:13px; margin-left: 40%;position: absolute; top: 50%; margin-top: -7px;" >'; a+=c.Batch;a+="\t\t</span>";a+="\t</div>";a+=' \t<div class="ui-btn-inner ui-li ">';a+='\t\t<div class="ui-btn-text">';a+='\t\t\t<a class="ui-link-inherit">';a+='\t\t\t\t<span style = "font-size:12px;" >Division : </span>';a+="\t\t\t</a>";a+="\t\t</div>";a+='\t\t<span style = "font-size:13px; margin-left: 40%;position: absolute; top: 50%; margin-top: -7px;" >';a+=c.section_name;a+="\t\t</span>";a+="\t</div>";a+=' \t<div class="ui-btn-inner ui-li ">';a+='\t\t<div class="ui-btn-text">';a+='\t\t\t<a class="ui-link-inherit">'; a+='\t\t\t\t<span style = "font-size:12px;" >Parent Name : </span>';a+="\t\t\t</a>";a+="\t\t</div>";a+='\t\t<span style = "font-size:13px; margin-left: 40%;position: absolute; top: 50%; margin-top: -7px;" >';a+=c.Parent_name;a+="\t\t</span>";a+="\t</div>";a+=' \t<div class="ui-btn-inner ui-li ">';a+='\t\t<div class="ui-btn-text">';a+='\t\t\t<a class="ui-link-inherit">';a+='\t\t\t\t<span style = "font-size:12px;" >Email : </span>';a+='\t\t\t\t<br/><span style = "font-size:13px; " >'+c.Email1+"</span>"; a+="\t\t\t</a>";a+="\t\t</div>";a+="\t</div>";a+=' \t<div class="ui-btn-inner ui-li ">';a+='\t\t<div class="ui-btn-text">';a+='\t\t\t<a class="ui-link-inherit">';a+='\t\t\t\t<span style = "font-size:12px;" >Contact : </span>';a+="\t\t\t</a>";a+="\t\t</div>";a+='\t\t<span style = "font-size:13px; margin-left: 40%;position: absolute; top: 50%; margin-top: -7px;" >';a+=c.Contact_no1;a+="\t\t</span>";a+="\t</div>";a+=' \t<div class="ui-btn-inner ui-li ">';a+='\t\t<div class="ui-btn-text">';a+='\t\t\t<a class="ui-link-inherit">'; a+='\t\t\t\t<span style = "font-size:12px;" >&nbsp;</span>';a+="\t\t\t</a>";a+="\t\t</div>";a+='\t\t<span style = "font-size:13px; margin-left: 40%;position: absolute; top: 5%; margin-top: -1px;" >';a="yes"==c.Maths||"yes"==c.Maths?a+d:a+b;a+=" Maths";a+="";a+="\t\t</span>";a+="\t</div>";a+=' \t<div class="ui-btn-inner ui-li ">';a+='\t\t<div class="ui-btn-text">';a+='\t\t\t<a class="ui-link-inherit">';a+='\t\t\t\t<span style = "font-size:12px;" >&nbsp;</span>';a+="\t\t\t</a>";a+="\t\t</div>";a+='\t\t<span style = "font-size:13px; margin-left: 40%;position: absolute; top: 5%; margin-top: -1px;" >'; a="yes"==c.Physics||"yes"==c.Physics?a+d:a+b;a+=" Physics";a+="\t\t</span>";a+="\t</div>";a+=' \t<div class="ui-btn-inner ui-li ">';a+='\t\t<div class="ui-btn-text">';a+='\t\t\t<a class="ui-link-inherit">';a+='\t\t\t\t<span style = "font-size:12px;" >&nbsp;</span>';a+="\t\t\t</a>";a+="\t\t</div>";a+='\t\t<span style = "font-size:13px; margin-left: 40%;position: absolute; top: 5%; margin-top: -1px;" >';a="yes"==c.Chemistry||"yes"==c.Chemistry?a+d:a+b;a+=" Chemistry";a+="\t\t</span>";a+="\t</div>"; a+="</li>";a+="</ul>";a=heading+a;$(".content",$("#profile")).html(a);$.mobile.changePage("#profile",{transition:"slide",changeHash:!0});$.mobile.hidePageLoadingMsg()} function showAnnouncements(c){void 0==window.localStorage["announcements-"+uid]&&(window.localStorage["announcements-"+uid]=JSON.stringify(c));var b="<br/>";$.each(c,function(c,a){b+='<li class="ui-btn ui-btn-icon-right ui-li ui-corner-all ui-btn-up-c" >';b+=' \t<div class="ui-btn-inner ui-li ui-corner-all">';b+='\t\t<div class="ui-btn-text">';b+='\t\t\t<a class="ui-link-inherit">';b+='\t\t\t\t<h3 class="ui-li-heading">'+a.title+"</h3>";b+='\t\t\t\t<p class="ui-li-desc" style = "white-space: normal;" >'+ a.content+"</p>";b+="\t\t\t\tDate : <strong>"+a.date+"</strong>";b+="\t\t\t</a>";b+="\t\t</div>";b+="\t</div>";b+="</li>"});b=heading+b;$(".content",$("#announcements")).html(b);$.mobile.changePage("#announcements",{transition:"slide",changeHash:!0});$.mobile.hidePageLoadingMsg()} function showAttendance(c){void 0==window.localStorage["attendance-"+uid]&&(window.localStorage["attendance-"+uid]=JSON.stringify(c));var b="",d,b=b+'<ul class="ui-listview ui-listview-inset ui-corner-all ">';$.each(c,function(a,c){d="Not Present";if("Yes"==c.Present||"yes"==c.Present)d="Present";b+='<li class="details ui-btn ui-btn-icon-right ui-li-has-arrow ui-li ui-corner-all ui-btn-up-c" id = "'+c.id+'" >';b+=' \t<div class="ui-btn-inner ui-li ui-corner-all">';b+='\t\t<div class="ui-btn-text">'; b+='\t\t\t<a class="ui-link-inherit">';b+="\t\t\t\t<strong>"+c.Date+"</strong>";b+="\t\t\t\t<br/>";b+='\t\t\t\t<span style="font-size:12px;">'+d+"</span>";b+="\t\t\t</a>";b+="\t\t</div>";b+='\t\t<span class="ui-icon ui-icon-arrow-r ui-icon-shadow">&nbsp;</span>';b+="\t</div>";b+="</li>"});b+="</ul>";b=heading+b;$(".content",$("#attendance")).html(b);$(".details").each(function(){var a=$(this).attr("id");$(this).click(function(){$.mobile.showPageLoadingMsg();if(void 0!=window.localStorage["attendanceid-"+ uid+"-"+a])return c=JSON.parse(window.localStorage["attendanceid-"+uid+"-"+a]),showAttendanceDetails(c),!1;$.ajax({type:"POST",url:url+"?op=show_attendance_details",data:{attendanceid:a},cache:!0,dataType:"json",success:showAttendanceDetails,error:onerror})})});$.mobile.changePage("#attendance",{transition:"slide",changeHash:!0});$.mobile.hidePageLoadingMsg()} function showAttendanceDetails(c){void 0==window.localStorage["attendanceid-"+uid+"-"+c.id]&&(window.localStorage["attendanceid-"+uid+"-"+c.id]=JSON.stringify(c));var b;b='<ul class="ui-listview ui-listview-inset ui-corner-all ">'+('<li class="ui-li ui-li-divider ui-btn ui-bar-a ui-corner-top">'+c.Date+"</li>");b+='<li class="ui-btn ui-btn-icon-right ui-li-has-arrow ui-li ui-btn-up-c" >';b+=' \t<div class="ui-btn-inner ui-li ">';b+='\t\t<div class="ui-btn-text">';b+='\t\t\t<a class="ui-link-inherit">'; b+='\t\t\t\t<span style = "font-size:12px;" >Listening in Class : </span>';b+="\t\t\t</a>";b+="\t\t</div>";b+='\t\t<span style = "font-size:13px; margin-left: 50%; position: absolute; top: 50%; margin-top: -7px;" >';b+=c.Listening;b+="</span>";b+="\t</div>";b+=' \t<div class="ui-btn-inner ui-li ">';b+='\t\t<div class="ui-btn-text">';b+='\t\t\t<a class="ui-link-inherit">';b+='\t\t\t\t<span style = "font-size:12px;" >Noting Points : </span>';b+="\t\t\t</a>";b+="\t\t</div>";b+='\t\t<span style = "font-size:13px; margin-left: 50%; position: absolute; top: 50%; margin-top: -7px;" >'; b+=c.Noting_points;b+="\t\t</span>";b+="\t</div>";b+=' \t<div class="ui-btn-inner ui-li ">';b+='\t\t<div class="ui-btn-text">';b+='\t\t\t<a class="ui-link-inherit">';b+='\t\t\t\t<span style = "font-size:12px;" >Overall Behaviour : </span>';b+="\t\t\t</a>";b+="\t\t</div>";b+='\t\t<span style = "font-size:13px; margin-left: 50%; position: absolute; top: 50%; margin-top: -7px;" >';b+=c.Behaviour;b+="\t\t</span>";b+="\t</div>";b+=' \t<div class="ui-btn-inner ui-li ">';b+='\t\t<div class="ui-btn-text">'; b+='\t\t\t<a class="ui-link-inherit">';b+='\t\t\t\t<span style = "font-size:12px;" >Worksheet : </span>';b+="\t\t\t</a>";b+="\t\t</div>";b+='\t\t<span style = "font-size:13px; margin-left: 50%;position: absolute; top: 50%; margin-top: -7px;" >';b+=c.Worksheet;b+="\t\t</span>";b+="\t</div>";b+="</li>";b+="</ul>";b=heading+b;$(".content",$("#attendanceDetails")).html(b);$.mobile.changePage("#attendanceDetails",{transition:"slide",changeHash:!0});$.mobile.hidePageLoadingMsg()} function showResults(c){void 0==window.localStorage["results-"+uid]&&(window.localStorage["results-"+uid]=JSON.stringify(c));html="";html+='<ul class="ui-listview ui-listview-inset ui-corner-all ">';$.each(c,function(b,c){html+='<li class="ui-btn ui-btn-icon-right ui-li-has-arrow ui-li ui-corner-all ui-btn-up-c" >';html+=' \t<div class="ui-btn-inner ui-li ui-corner-all">';html+='\t\t<div class="ui-btn-text">';html+='\t\t\t<a class="ui-link-inherit">';html+="\t\t\t\t<strong>"+c.subject+"</strong>"; html+="\t\t\t\t<br/>";html+='\t\t\t\t<span style="font-size:12px;">'+c.date+"</span>";html+="\t\t\t</a>";html+="\t\t</div>";html+='\t\t<span style = "right: 15%; margin-right: -9px;position: absolute; top: 50%; margin-top: -9px;" >'+c.mark+"</span>";html+="\t</div>";html+="</li>"});html+="</ul>";html=heading+html;$(".content",$("#results")).html(html);$.mobile.changePage("#results",{transition:"slide",changeHash:!0});$.mobile.hidePageLoadingMsg()} function onSuccess(c){void 0!=c.Name?(window.localStorage.username=c.Name,window.localStorage.userid=$("#txtUserName").val().trim(),window.localStorage.studentid=c.id,c=new Date,uid=""+window.localStorage.userid+c.getFullYear()+c.getMonth()+c.getDate(),$.mobile.changePage("#home",{transition:"slide",reverse:!1,changeHash:!1})):(alert("Incorrect Login"),$("#txtUserName").val(""),$("#txtPassword").val(""));$.mobile.hidePageLoadingMsg();$("#txtUserName").val("");$("#txtPassword").val("")} function onerror(){alert("Error In Your Internet Connection");$.mobile.hidePageLoadingMsg();$("#txtUserName").val("");$("#txtPassword").val("")};
